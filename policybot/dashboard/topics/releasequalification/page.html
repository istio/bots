<aside class="callout warning">
    <div class="type">
        <svg class="large-icon">
            <use xlink:href="/icons/icons.svg#callout-warning">
            </use>
        </svg>
    </div>
    <div class="content">
        This page is under construction
    </div>
</aside>

<p>
    This dashboard shows results of release qualification pipeline
</p>

<p>
    To view the monitor/alert definition, checkout <a href="https://github.com/istio/tools/blob/master/perf/stability/alertmanager/prometheusrule.yaml">PrometheusRule list</a>
</p>

{{ range $branch, $aggregatedStatus := .StatusByBranch }}
<table>
    <caption>Monitor Status for {{ $branch }}</caption>
    <thead>
    <tr>
        <th>Monitor</th>
        <th>Status</th>
        <th>ProjectID</th>
        <th>ClusterName</th>
        <th>UpdatedTime</th>
        <th>TestID</th>
        <th>Branch/SHA/Tag</th>
        <th>FiredTimes</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
        {{ range $monitorName, $singleStatus := $aggregatedStatus }}
        <tr>
            <td>{{ $monitorName }}</td>
            {{ if eq $singleStatus.Status "HEALTHY"}}
              <td style="color: green">{{ $singleStatus.Status }}</td>
            {{ else }}
              <td style="color: red">{{ $singleStatus.Status }}</td>
            {{ end }}
            <td>{{ $singleStatus.ProjectID }}</td>
            <td>{{ $singleStatus.ClusterName }}</td>
            <td>{{ $singleStatus.UpdatedTime }}</td>
            <td>{{ $singleStatus.TestID }}</td>
            <td>{{ $singleStatus.Branch }}</td>
            {{ if eq $singleStatus.FiredTimes 0 }}
                <td style="color: green">{{ $singleStatus.FiredTimes }}</td>
            {{ else }}
                <td style="color: red">{{ $singleStatus.FiredTimes }}</td>
            {{ end }}
            <td>{{ $singleStatus.Description }}</td>
        </tr>
        {{ end}}
    </tbody>
</table>
{{ end}}